{"version":3,"file":"setup.js","sources":["../src/localstorage.js","../src/setup.js"],"sourcesContent":["export class LocalStorage {\n  constructor(jest) {\n    Object.defineProperty(this, 'getItem', {\n      enumerable: false,\n      value: jest.fn(key => this[key] || null),\n    });\n    Object.defineProperty(this, 'setItem', {\n      enumerable: false,\n      // not mentioned in the spec, but we must always coerce to a string\n      value: jest.fn((key, val = '') => {\n        this[key] = val + '';\n      }),\n    });\n    Object.defineProperty(this, 'removeItem', {\n      enumerable: false,\n      value: jest.fn(key => {\n        delete this[key];\n      }),\n    });\n    Object.defineProperty(this, 'clear', {\n      enumerable: false,\n      value: jest.fn(() => {\n        Object.keys(this).map(key => delete this[key]);\n      }),\n    });\n    Object.defineProperty(this, 'toString', {\n      enumerable: false,\n      value: jest.fn(() => {\n        return '[object Storage]';\n      }),\n    });\n    Object.defineProperty(this, 'key', {\n      enumerable: false,\n      value: jest.fn(idx => Object.keys(this)[idx] || null),\n    });\n  } // end constructor\n\n  get length() {\n    return Object.keys(this).length;\n  }\n  // for backwards compatibility\n  get __STORE__() {\n    return this;\n  }\n}\n","import { LocalStorage } from './localstorage';\n\nif (typeof global._localStorage !== 'undefined') {\n  Object.defineProperty(global, '_localStorage', {\n    value: new LocalStorage(jest),\n  });\n} else {\n  global.localStorage =  new LocalStorage(jest);\n}\n\nif (typeof global._sessionStorage !== 'undefined') {\n  Object.defineProperty(global, '_sessionStorage', {\n    value: new LocalStorage(jest),\n  });\n} else {\n  global.sessionStorage =  new LocalStorage(jest);\n}\n"],"names":["LocalStorage","jest","defineProperty","fn","key","val","keys","map","idx","Object","length","__STORE__","global","_localStorage","localStorage","_sessionStorage","sessionStorage"],"mappings":";;AAAO,MAAMA,YAAN,CAAmB;cACZC,IAAZ,EAAkB;WACTC,cAAP,CAAsB,IAAtB,EAA4B,SAA5B,EAAuC;kBACzB,KADyB;aAE9BD,KAAKE,EAAL,CAAQC,OAAO,KAAKA,GAAL,KAAa,IAA5B;KAFT;WAIOF,cAAP,CAAsB,IAAtB,EAA4B,SAA5B,EAAuC;kBACzB,KADyB;;aAG9BD,KAAKE,EAAL,CAAQ,CAACC,GAAD,EAAMC,MAAM,EAAZ,KAAmB;aAC3BD,GAAL,IAAYC,MAAM,EAAlB;OADK;KAHT;WAOOH,cAAP,CAAsB,IAAtB,EAA4B,YAA5B,EAA0C;kBAC5B,KAD4B;aAEjCD,KAAKE,EAAL,CAAQC,OAAO;eACb,KAAKA,GAAL,CAAP;OADK;KAFT;WAMOF,cAAP,CAAsB,IAAtB,EAA4B,OAA5B,EAAqC;kBACvB,KADuB;aAE5BD,KAAKE,EAAL,CAAQ,MAAM;eACZG,IAAP,CAAY,IAAZ,EAAkBC,GAAlB,CAAsBH,OAAO,OAAO,KAAKA,GAAL,CAApC;OADK;KAFT;WAMOF,cAAP,CAAsB,IAAtB,EAA4B,UAA5B,EAAwC;kBAC1B,KAD0B;aAE/BD,KAAKE,EAAL,CAAQ,MAAM;eACZ,kBAAP;OADK;KAFT;WAMOD,cAAP,CAAsB,IAAtB,EAA4B,KAA5B,EAAmC;kBACrB,KADqB;aAE1BD,KAAKE,EAAL,CAAQK,OAAOC,OAAOH,IAAP,CAAY,IAAZ,EAAkBE,GAAlB,KAA0B,IAAzC;KAFT;GA/BsB;;MAqCpBE,MAAJ,GAAa;WACJD,OAAOH,IAAP,CAAY,IAAZ,EAAkBI,MAAzB;;;MAGEC,SAAJ,GAAgB;WACP,IAAP;;;;ACxCJ,IAAI,OAAOC,OAAOC,aAAd,KAAgC,WAApC,EAAiD;SACxCX,cAAP,CAAsBU,MAAtB,EAA8B,eAA9B,EAA+C;WACtC,IAAIZ,YAAJ,CAAiBC,IAAjB;GADT;CADF,MAIO;SACEa,YAAP,GAAuB,IAAId,YAAJ,CAAiBC,IAAjB,CAAvB;;;AAGF,IAAI,OAAOW,OAAOG,eAAd,KAAkC,WAAtC,EAAmD;SAC1Cb,cAAP,CAAsBU,MAAtB,EAA8B,iBAA9B,EAAiD;WACxC,IAAIZ,YAAJ,CAAiBC,IAAjB;GADT;CADF,MAIO;SACEe,cAAP,GAAyB,IAAIhB,YAAJ,CAAiBC,IAAjB,CAAzB;"}