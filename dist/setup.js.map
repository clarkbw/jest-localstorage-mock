{"version":3,"file":"setup.js","sources":["../src/localstorage.js","../src/setup.js"],"sourcesContent":["export class LocalStorage {\n  constructor() {\n    this.store = {};\n  }\n\n  clear() {\n    this.store = {};\n  }\n\n  getItem(key) {\n    return this.store[key] || null;\n  }\n\n  setItem(key, value = '') {\n    // not mentioned in the spec, but we must always coerce to a string\n    this.store[key] = value + '';\n  }\n\n  removeItem(key) {\n    delete this.store[key];\n  }\n\n  key(index) {\n    const keys = Object.keys(this.store);\n    return keys[index] || null;\n  }\n\n  get length() {\n    return Object.keys(this.store).length;\n  }\n\n  toString() {\n    return '[object Storage]';\n  }\n}\n","import { LocalStorage } from './localstorage';\n\nconst local = new LocalStorage();\nconst session = new LocalStorage();\n\nglobal.localStorage = {\n  clear: jest.fn(() => local.clear()),\n  getItem: jest.fn(key => local.getItem(key)),\n  setItem: jest.fn((key, value) => local.setItem(key, value)),\n  removeItem: jest.fn(key => local.removeItem(key)),\n  key: jest.fn(index => local.key(index)),\n  toString: jest.fn(() => local.toString()),\n  get __STORE__() {\n    return local.store;\n  },\n  set __STORE__(store) {\n    local.store = store;\n  },\n  get length() {\n    return local.length;\n  },\n};\n\nglobal.sessionStorage = {\n  clear: jest.fn(() => session.clear()),\n  getItem: jest.fn(key => session.getItem(key)),\n  setItem: jest.fn((key, value) => session.setItem(key, value)),\n  removeItem: jest.fn(key => session.removeItem(key)),\n  key: jest.fn(index => session.key(index)),\n  toString: jest.fn(() => session.toString()),\n  get __STORE__() {\n    return session.store;\n  },\n  set __STORE__(store) {\n    session.store = store;\n  },\n  get length() {\n    return session.length;\n  },\n};\n"],"names":["LocalStorage","store","key","value","index","keys","Object","length","local","session","global","localStorage","jest","fn","clear","getItem","setItem","removeItem","toString","__STORE__","sessionStorage"],"mappings":";;AAAO,MAAMA,YAAN,CAAmB;gBACV;SACPC,KAAL,GAAa,EAAb;;;UAGM;SACDA,KAAL,GAAa,EAAb;;;UAGMC,GAAR,EAAa;WACJ,KAAKD,KAAL,CAAWC,GAAX,KAAmB,IAA1B;;;UAGMA,GAAR,EAAaC,QAAQ,EAArB,EAAyB;;SAElBF,KAAL,CAAWC,GAAX,IAAkBC,QAAQ,EAA1B;;;aAGSD,GAAX,EAAgB;WACP,KAAKD,KAAL,CAAWC,GAAX,CAAP;;;MAGEE,KAAJ,EAAW;UACHC,OAAOC,OAAOD,IAAP,CAAY,KAAKJ,KAAjB,CAAb;WACOI,KAAKD,KAAL,KAAe,IAAtB;;;MAGEG,MAAJ,GAAa;WACJD,OAAOD,IAAP,CAAY,KAAKJ,KAAjB,EAAwBM,MAA/B;;;aAGS;WACF,kBAAP;;;;AC9BJ,MAAMC,QAAQ,IAAIR,YAAJ,EAAd;AACA,MAAMS,UAAU,IAAIT,YAAJ,EAAhB;;AAEAU,OAAOC,YAAP,GAAsB;SACbC,KAAKC,EAAL,CAAQ,MAAML,MAAMM,KAAN,EAAd,CADa;WAEXF,KAAKC,EAAL,CAAQX,OAAOM,MAAMO,OAAN,CAAcb,GAAd,CAAf,CAFW;WAGXU,KAAKC,EAAL,CAAQ,CAACX,GAAD,EAAMC,KAAN,KAAgBK,MAAMQ,OAAN,CAAcd,GAAd,EAAmBC,KAAnB,CAAxB,CAHW;cAIRS,KAAKC,EAAL,CAAQX,OAAOM,MAAMS,UAAN,CAAiBf,GAAjB,CAAf,CAJQ;OAKfU,KAAKC,EAAL,CAAQT,SAASI,MAAMN,GAAN,CAAUE,KAAV,CAAjB,CALe;YAMVQ,KAAKC,EAAL,CAAQ,MAAML,MAAMU,QAAN,EAAd,CANU;MAOhBC,SAAJ,GAAgB;WACPX,MAAMP,KAAb;GARkB;MAUhBkB,SAAJ,CAAclB,KAAd,EAAqB;UACbA,KAAN,GAAcA,KAAd;GAXkB;MAahBM,MAAJ,GAAa;WACJC,MAAMD,MAAb;;CAdJ;;AAkBAG,OAAOU,cAAP,GAAwB;SACfR,KAAKC,EAAL,CAAQ,MAAMJ,QAAQK,KAAR,EAAd,CADe;WAEbF,KAAKC,EAAL,CAAQX,OAAOO,QAAQM,OAAR,CAAgBb,GAAhB,CAAf,CAFa;WAGbU,KAAKC,EAAL,CAAQ,CAACX,GAAD,EAAMC,KAAN,KAAgBM,QAAQO,OAAR,CAAgBd,GAAhB,EAAqBC,KAArB,CAAxB,CAHa;cAIVS,KAAKC,EAAL,CAAQX,OAAOO,QAAQQ,UAAR,CAAmBf,GAAnB,CAAf,CAJU;OAKjBU,KAAKC,EAAL,CAAQT,SAASK,QAAQP,GAAR,CAAYE,KAAZ,CAAjB,CALiB;YAMZQ,KAAKC,EAAL,CAAQ,MAAMJ,QAAQS,QAAR,EAAd,CANY;MAOlBC,SAAJ,GAAgB;WACPV,QAAQR,KAAf;GARoB;MAUlBkB,SAAJ,CAAclB,KAAd,EAAqB;YACXA,KAAR,GAAgBA,KAAhB;GAXoB;MAalBM,MAAJ,GAAa;WACJE,QAAQF,MAAf;;CAdJ"}